<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.xihrni.com</id>
    <title>æˆ‘çš„ä¸–ç•Œ</title>
    <updated>2020-06-17T02:29:16.329Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.xihrni.com"/>
    <link rel="self" href="https://www.xihrni.com/atom.xml"/>
    <subtitle>å›å­å’Œè€Œä¸åŒã€‚ç©·åˆ™ç‹¬å–„å…¶èº«ï¼Œè¾¾åˆ™å…¼æµå¤©ä¸‹ã€‚</subtitle>
    <logo>https://www.xihrni.com/images/avatar.png</logo>
    <icon>https://www.xihrni.com/favicon.ico</icon>
    <rights>All rights reserved 2020, æˆ‘çš„ä¸–ç•Œ</rights>
    <entry>
        <title type="html"><![CDATA[MySQL æ¡ä»¶æ‰¹é‡æ›´æ–°ä¸æ’å…¥ï¼ˆPHPå®ç°ï¼‰]]></title>
        <id>https://www.xihrni.com/post/mysql-tiao-jian-pi-liang-geng-xin-yu-cha-ru-php-shi-xian/</id>
        <link href="https://www.xihrni.com/post/mysql-tiao-jian-pi-liang-geng-xin-yu-cha-ru-php-shi-xian/">
        </link>
        <updated>2020-06-17T01:54:38.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>ğŸ˜³æœ‰ä¸ªæ¥å£éœ€è¦åŒæ—¶ä¿®æ”¹å…³è”æ•°æ®ï¼Œä½†æ˜¯ä¼ è¿‡æ¥çš„å…³è”æ•°æ®åŒ…å«åŸæœ¬çš„æ•°æ®ï¼ˆæ›´æ–°ï¼‰å’Œæ–°çš„æ•°æ®ï¼ˆæ’å…¥ï¼‰ï¼Œä¸ºäº†åŒºåˆ†åˆ™è®©å‰ç«¯å°†åŸæ¥çš„æ•°æ®å¿…é¡»ä¼ IDï¼Œçœ‹çœ‹å¦‚ä½•åœ¨ä¸€ä¸ªæ¥å£ä¸­å®ç°æ›´æ–°å’Œæ’å…¥æ“ä½œ</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>ğŸ˜³æœ‰ä¸ªæ¥å£éœ€è¦åŒæ—¶ä¿®æ”¹å…³è”æ•°æ®ï¼Œä½†æ˜¯ä¼ è¿‡æ¥çš„å…³è”æ•°æ®åŒ…å«åŸæœ¬çš„æ•°æ®ï¼ˆæ›´æ–°ï¼‰å’Œæ–°çš„æ•°æ®ï¼ˆæ’å…¥ï¼‰ï¼Œä¸ºäº†åŒºåˆ†åˆ™è®©å‰ç«¯å°†åŸæ¥çš„æ•°æ®å¿…é¡»ä¼ IDï¼Œçœ‹çœ‹å¦‚ä½•åœ¨ä¸€ä¸ªæ¥å£ä¸­å®ç°æ›´æ–°å’Œæ’å…¥æ“ä½œ</p>
</blockquote>
<!-- more -->
<h3 id="æ¥å£éœ€æ±‚">æ¥å£éœ€æ±‚</h3>
<p>è¯·æ±‚åœ°å€</p>
<pre><code class="language-text">POST {{domain}}/v1/user/api-envs/:id
</code></pre>
<p>è¯·æ±‚æ•°æ®</p>
<pre><code class="language-json">{
	&quot;title&quot;: &quot;ç¯å¢ƒå˜é‡ç»„1&quot;,
	&quot;variables&quot;: [
		{
			&quot;id&quot;: 1,
			&quot;name&quot;: &quot;admin_token1&quot;,
			&quot;value&quot;: &quot;123456&quot;
		},
		{
			&quot;name&quot;: &quot;user_token&quot;,
			&quot;value&quot;: &quot;456789&quot;
		},
		{
			&quot;id&quot;: 2,
			&quot;name&quot;: &quot;admin_token2&quot;,
			&quot;value&quot;: &quot;1234567&quot;
		},
		{
			&quot;id&quot;: 4,
			&quot;name&quot;: &quot;admin_token4&quot;,
			&quot;value&quot;: &quot;1234568&quot;
		},
		{
			&quot;name&quot;: &quot;user_token2&quot;,
			&quot;value&quot;: &quot;4567890&quot;
		}
	]
}
</code></pre>
<p>æ•°æ®åº“è¡¨ç»“æ„<br>
<code>api_env</code> ç¯å¢ƒ</p>
<table>
<thead>
<tr>
<th style="text-align:left">åç§°</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:right">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">int(11) unsigned</td>
<td style="text-align:right">ID</td>
</tr>
<tr>
<td style="text-align:left">title</td>
<td style="text-align:left">varchar(32)</td>
<td style="text-align:right">æ ‡é¢˜</td>
</tr>
<tr>
<td style="text-align:left">created_at</td>
<td style="text-align:left">timestamp</td>
<td style="text-align:right">åˆ›å»ºæ—¶é—´</td>
</tr>
</tbody>
</table>
<p><code>api_env_variable</code> ç¯å¢ƒå˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:left">åç§°</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:right">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">int(11) unsigned</td>
<td style="text-align:right">ID</td>
</tr>
<tr>
<td style="text-align:left">env_id</td>
<td style="text-align:left">int(11) unsigned</td>
<td style="text-align:right">ç¯å¢ƒID</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">varchar(32)</td>
<td style="text-align:right">åç§°</td>
</tr>
<tr>
<td style="text-align:left">value</td>
<td style="text-align:left">varchar(255)</td>
<td style="text-align:right">å€¼</td>
</tr>
<tr>
<td style="text-align:left">created_at</td>
<td style="text-align:left">timestamp</td>
<td style="text-align:right">åˆ›å»ºæ—¶é—´</td>
</tr>
</tbody>
</table>
<h3 id="mysql-æ¡ä»¶æ‰¹é‡æ›´æ–°è¯­å¥">MySQL æ¡ä»¶æ‰¹é‡æ›´æ–°è¯­å¥</h3>
<pre><code class="language-sql">UPDATE `api_env_variable`
SET `name` = CASE `id`
    WHEN 1 THEN 'admin_token1' 
    WHEN 2 THEN 'admin_token2'
    WHEN 4 THEN 'admin_token4'
END
WHERE `id` IN (1,2,4)
</code></pre>
<p>åé¢çš„æ¡ä»¶ <code>id</code> ç”¨äºæå‡æ•ˆç‡ï¼Œè¿˜å¯åŠ  <code>AND</code> æ¡ä»¶ç­›é€‰</p>
<h3 id="php-å®ç°">PHP å®ç°</h3>
<p>ä½¿ç”¨ Yii2 æ¡†æ¶è¿›è¡Œç¤ºä¾‹ï¼š</p>
<pre><code class="language-php">$data = Yii::$app-&gt;request-&gt;post();

// æ›´æ–°ç¯å¢ƒæ•°æ®
// ... 

// æ›´æ–°å’Œæ’å…¥ç¯å¢ƒå˜é‡æ•°æ®
if ($data['variables']) {
    $updateData = []; // éœ€è¦æ›´æ–°çš„æ•°æ®
    $insertData = []; // éœ€è¦æ’å…¥çš„æ•°æ®
    foreach ($data['variables'] as $v) {
        // è¿‡æ»¤æ•°æ®
        if ($v['name'] &amp;&amp; $v['value']) {
            // åˆ¤æ–­æ˜¯æ’å…¥è¿˜æ˜¯æ›´æ–°
            $v['id'] ? $updateData[] = $v : $insertData[] = $v;
        }
    }

    // å¼€å¯äº‹åŠ¡
    $result = Yii::$app-&gt;db-&gt;transaction(function ($e) use ($id, $updateData, $insertData) {
        $table = ApiEnvVariable::tableName();

        // æ›´æ–°
        if ($updateData) {
            $ids = $name = $value = '';
            foreach ($updateData as $v) {
                $ids   .= $v['id'] . ',';
                $name  .= &quot; WHEN ${v['id']} THEN '${v['name']}'&quot;;
                $value .= &quot; WHEN ${v['id']} THEN '${v['value']}'&quot;;
            }

            $ids = rtrim($ids, ',');
            $sql = &quot;UPDATE ${table} SET name = CASE id ${name} END, value = CASE id ${value} END WHERE id IN (${ids}) AND is_trash = 0&quot;;

            try {
                $result = Yii::$app-&gt;db-&gt;createCommand($sql)-&gt;execute();
                // var_dump($result);
            } catch (Exception $e) {
                // var_dump($e-&gt;getMessage());
                throw new ServerErrorHttpException(Yii::t('app/error', 'Update failed.'));
                $e-&gt;transaction-&gt;rollBack();
            }
        }

        // æ’å…¥
        if ($insertData) {
            $insertData = array_map(function ($v) use ($id) {
                return [
                    'env_id' =&gt; $id,
                    'name'   =&gt; $v['name'],
                    'value'  =&gt; $v['value'],
                ];
            }, $insertData);

            return Yii::$app-&gt;db-&gt;createCommand()
                -&gt;batchInsert($table, ['env_id', 'name', 'value'], $insertData)
                -&gt;execute();
        }

        // $e-&gt;transaction-&gt;commit(); // æ— é”™è¯¯æˆ–å¼‚å¸¸æ‰§è¡Œå®Œè‡ªåŠ¨æäº¤äº‹åŠ¡
        return true;
    });

    // éªŒè¯è¿”å›
    // ...
}
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Yii2 è‡ªå®šä¹‰ç»„ä»¶é…ç½® PhpStorm ç¼–è¾‘å™¨ä»£ç æç¤º]]></title>
        <id>https://www.xihrni.com/post/yii2-zi-ding-yi-zu-jian-pei-zhi-phpstorm-bian-ji-qi-dai-ma-ti-shi/</id>
        <link href="https://www.xihrni.com/post/yii2-zi-ding-yi-zu-jian-pei-zhi-phpstorm-bian-ji-qi-dai-ma-ti-shi/">
        </link>
        <updated>2020-06-05T01:34:03.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="è‡ªå®šä¹‰ç»„ä»¶é…ç½®">ğŸ˜³è‡ªå®šä¹‰ç»„ä»¶é…ç½®</h3>
<p>åœ¨ <code>web.php</code> çš„ç»„ä»¶é…ç½®ä¸­æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰ç”¨æˆ·ç»„ä»¶</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="è‡ªå®šä¹‰ç»„ä»¶é…ç½®">ğŸ˜³è‡ªå®šä¹‰ç»„ä»¶é…ç½®</h3>
<p>åœ¨ <code>web.php</code> çš„ç»„ä»¶é…ç½®ä¸­æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰ç”¨æˆ·ç»„ä»¶</p>
<!-- more -->
<pre><code class="language-php">&lt;?php

$config = [
    ...
    'components' =&gt; [
        ...
        'admin' =&gt; [
            'class' =&gt; 'yii\web\User',
            'identityClass' =&gt; 'app\models\Admin',
            'enableAutoLogin' =&gt; true,
            'enableSession' =&gt; false,
            'loginUrl' =&gt; null,
        ],
        ...
    ],
    ...
]

...

return $config;
</code></pre>
<p>å½“åœ¨ä½¿ç”¨çš„æ—¶å€™ PhpStorm ç¼–è¾‘å™¨åˆ™ä¼šæç¤ºâ€œProperty accessed via magic methodâ€ä¿¡æ¯ï¼Œå¹¶ä¸”æ— æ³•å…³è”ç±»ä¹Ÿæ— æ³•è¿›è¡Œè‡ªåŠ¨æç¤ºä»£ç è¡¥å…¨</p>
<figure data-type="image" tabindex="1"><img src="https://www.xihrni.com/post-images/1591321895158.png" alt="æç¤ºâ€œProperty accessed via magic methodâ€ä¿¡æ¯" loading="lazy"></figure>
<h3 id="åˆ›å»ºå£°æ˜ç±»æ–‡ä»¶">åˆ›å»ºå£°æ˜ç±»æ–‡ä»¶</h3>
<p>ç»™ IDE ä¸€äº›æç¤ºçš„æœ€å¥½æ–¹æ³•æ˜¯ä½¿ç”¨è‡ªå·±çš„ Yii æ–‡ä»¶ï¼Œè¿è¡Œä»£ç æ—¶å®ƒå®é™…ä¸Šå¹¶ä¸ä½¿ç”¨ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥å‘½åä¸º <code>Yii.php</code> ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºã€‚å…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-php">&lt;?php

use app\models\Admin;

/**
 * Yii bootstrap file.
 * Used for enhanced IDE code autocompletion.
 */
class Yii extends \yii\BaseYii
{
    /**
     * @var BaseApplication|WebApplication|ConsoleApplication the application instance
     */
    public static $app;
}

/**
 * Class BaseApplication
 * Used for properties that are identical for both WebApplication and ConsoleApplication
 *
// * @property \app\components\RbacManager $authManager The auth manager for this application. Null is returned if auth manager is not configured. This property is read-only. Extended component.
// * @property \app\components\Mailer $mailer The mailer component. This property is read-only. Extended component.
 */
abstract class BaseApplication extends yii\base\Application
{
}

/**
 * Class WebApplication
 * Include only Web application related components here
 *
 * @property Admin $admin The user component. This property is read-only. Extended component.
// * @property \app\components\User $user The user component. This property is read-only. Extended component.
// * @property \app\components\MyResponse $response The response component. This property is read-only. Extended component.
// * @property \app\components\ErrorHandler $errorHandler The error handler application component. This property is read-only. Extended component.
 */
class WebApplication extends yii\web\Application
{
}

/**
 * Class ConsoleApplication
 * Include only Console application related components here
 *
// * @property \app\components\ConsoleUser $user The user component. This property is read-only. Extended component.
 */
class ConsoleApplication extends yii\console\Application
{
}
</code></pre>
<blockquote>
<p><code>BaseApplication</code> è¡¨ç¤ºåŒ…å«æ‰€æœ‰ç¯å¢ƒä¸‹çš„ Yii ç±»<br>
<code>WebApplication</code> è¡¨ç¤º Web ç¯å¢ƒä¸‹çš„ Yii ç±»<br>
<code>ConsoleApplication</code> è¡¨ç¤º Cli ç¯å¢ƒä¸‹çš„ Yii ç±»</p>
</blockquote>
<p>ç”±äºå·²ç»æœ‰ä¸€ä¸ª Yii çš„ç±»äº†ï¼Œæ‰€ä»¥ PhpStorm ç¼–è¾‘å™¨ä¼šæç¤ºâ€œMultiple Implementationsâ€ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>vendor/yiisoft/yii2/Yii.php</code> æ–‡ä»¶æ ‡è®°ä¸ºçº¯æ–‡æœ¬</p>
<figure data-type="image" tabindex="2"><img src="https://www.xihrni.com/post-images/1591322367077.png" alt="å°†  æ–‡ä»¶æ ‡è®°ä¸ºçº¯æ–‡æœ¬" loading="lazy"></figure>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ç»™æ¯ä¸ªå¯¹åº”çš„ç±»æ·»åŠ äº† @property æ–‡æ¡£æ³¨é‡Šï¼Œä¹‹åå†å»å®é™…ä¸šåŠ¡ä»£ç ä¸­ä¼šå‘ç°å·²ç»ä¸ä¼šæç¤ºâ€œProperty accessed via magic methodâ€ä¿¡æ¯äº†å¹¶ä¸”èƒ½åƒæ­£å¸¸çš„ç±»å…³è”å’Œè‡ªåŠ¨æç¤ºä»£ç è¡¥å…¨</p>
<figure data-type="image" tabindex="3"><img src="https://www.xihrni.com/post-images/1591322835443.png" alt="æ­£å¸¸çš„ç±»å…³è”å’Œè‡ªåŠ¨æç¤ºä»£ç è¡¥å…¨" loading="lazy"></figure>
<h3 id="å¿½ç•¥ç‰ˆæœ¬æ§åˆ¶">å¿½ç•¥ç‰ˆæœ¬æ§åˆ¶</h3>
<p>å¯ä»¥å°†è‡ªå®šä¹‰çš„ <code>Yii.php</code> åŠ å…¥åˆ° <code>.gitignore</code> å¿½ç•¥æ–‡ä»¶ä¸­æäº¤åˆ°ä»£ç ç‰ˆæœ¬è¿›è¡Œæ¨é€åˆ°çº¿ä¸Šåä½œï¼Œä¹Ÿå¯ä»¥åŠ å…¥åˆ°æœ¬åœ°å…¨å±€å¿½ç•¥æ–‡ä»¶ä¸è¿›è¡Œæäº¤</p>
<blockquote>
<p>å¦‚æœå·²æœ‰å…¨å±€å¿½ç•¥æ–‡ä»¶åˆ™ç›´æ¥åœ¨æ–‡ä»¶ä¸­è¿½åŠ  <code>/Yii.php</code> å­—ç¬¦ä¸²å³å¯</p>
</blockquote>
<pre><code class="language-shell">&gt; git config --global core.excludesfile ~/.gitignore_global
# å¦‚æœæ²¡æœ‰ `.gitignore_global` æ–‡ä»¶åˆ™è¿›è¡Œåˆ›å»º
&gt; echo '/Yii.php' &gt; .gitignore_global
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Git ä»è¿œç¨‹æ‹‰å–æ•°æ®æ—¶æç¤ºï¼š'You have not concluded your merge (MERGE_HEAD exists).' è§£å†³æ–¹æ³•]]></title>
        <id>https://www.xihrni.com/post/git-cong-yuan-cheng-la-qu-shu-ju-shi-ti-shi-you-have-not-concluded-your-merge-merge_head-exists/</id>
        <link href="https://www.xihrni.com/post/git-cong-yuan-cheng-la-qu-shu-ju-shi-ti-shi-you-have-not-concluded-your-merge-merge_head-exists/">
        </link>
        <updated>2020-06-02T03:07:51.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="å½“å‰çŠ¶æ€">ğŸ˜³å½“å‰çŠ¶æ€</h3>
<p>æœ‰äº›ä»£ç æœªåŠ åˆ°å¿½ç•¥æ–‡ä»¶ç„¶åç³»ç»Ÿè¿è¡Œä¸­è¢«ä¿®æ”¹ä¹‹åå¦‚æœæœªå¤„ç†è¿›è¡Œæ‹‰å–ï¼Œåœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°äº†å¦‚ä¸‹çŠ¶æ€</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="å½“å‰çŠ¶æ€">ğŸ˜³å½“å‰çŠ¶æ€</h3>
<p>æœ‰äº›ä»£ç æœªåŠ åˆ°å¿½ç•¥æ–‡ä»¶ç„¶åç³»ç»Ÿè¿è¡Œä¸­è¢«ä¿®æ”¹ä¹‹åå¦‚æœæœªå¤„ç†è¿›è¡Œæ‹‰å–ï¼Œåœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°äº†å¦‚ä¸‹çŠ¶æ€</p>
<!-- more -->
<pre><code class="language-shell">&gt; git status
# On branch develop
# Your branch and 'origin/develop' have diverged,
# and have 9 and 7 different commits each, respectively.
#   (use &quot;git pull&quot; to merge the remote branch into yours)
#
# All conflicts fixed but you are still merging.
#   (use &quot;git commit&quot; to conclude merge)
#
# Changes not staged for commit:
#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)
#
#       modified:   config/site_config.php
#       modified:   sitemap_article.xml
#       modified:   sitemap_goods.xml
#       modified:   sitemaps.xml
#
no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
</code></pre>
<p>è¿™ä¸ªæ—¶å€™å¯ä»¥å…ˆå¤‡ä»½ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œç„¶åé‡ç½®åˆ°ä¿®æ”¹ä¹‹å‰çš„çŠ¶æ€å†æ‹‰å–è¯•è¯•</p>
<pre><code class="language-shell">&gt; git checkout -- config/site_config.php
&gt; git checkout -- sitemap_article.xml
&gt; git checkout -- sitemap_goods.xml
&gt; git checkout -- sitemap.xml
&gt; git pull
</code></pre>
<p>å¦‚æœæç¤ºä»¥ä¸‹ä¿¡æ¯åˆ™éœ€è¦ä½¿ç”¨å¼ºåˆ¶åˆå¹¶è¿›è¡Œæ“ä½œ</p>
<pre><code class="language-shell">&gt; git pull
You have not concluded your merge (MERGE_HEAD exists).
Please, commit your changes before you can merge.
</code></pre>
<h3 id="å¼ºåˆ¶åˆå¹¶">å¼ºåˆ¶åˆå¹¶</h3>
<blockquote>
<p>å¼ºåˆ¶åˆå¹¶ä¼šè¦†ç›–æœ¬åœ°ç‰ˆæœ¬ï¼Œè¯·å…ˆå¤‡ä»½ç›¸å…³æ–‡ä»¶</p>
</blockquote>
<pre><code class="language-shell">&gt; git fetch --all
&gt; git reset --hard origin/master
&gt; git fetch
</code></pre>
<p>å†è¿›è¡Œæ‹‰å–åˆ™æ²¡æœ‰é—®é¢˜äº†</p>
<pre><code class="language-shell">&gt; git pull
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Borderlands 2 è®¾ç½®ä¸ºç¹ä½“ä¸­æ–‡ï¼ˆEpic Games å¹³å°ï¼‰]]></title>
        <id>https://www.xihrni.com/post/borderlands-2-she-zhi-wei-fan-ti-zhong-wen-epic-games-ping-tai/</id>
        <link href="https://www.xihrni.com/post/borderlands-2-she-zhi-wei-fan-ti-zhong-wen-epic-games-ping-tai/">
        </link>
        <updated>2020-06-02T00:24:01.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ˜³æ‰“å¼€ Epic Games å¹³å°å…ˆå®‰è£…å¥½æ¸¸æˆåè¿›å…¥è®¾ç½®ç•Œé¢</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ˜³æ‰“å¼€ Epic Games å¹³å°å…ˆå®‰è£…å¥½æ¸¸æˆåè¿›å…¥è®¾ç½®ç•Œé¢</p>
<!-- more -->
<figure data-type="image" tabindex="1"><img src="https://www.xihrni.com/post-images/1591057609359.png" alt="Epic Games å¹³å°è®¾ç½®ç•Œé¢" loading="lazy"></figure>
<p>æ»‘åŠ¨åˆ°æœ€ä¸‹æ–¹çš„ç®¡ç†æ¸¸æˆï¼Œå±•å¼€ BORDERLANDS 2ï¼Œå‹¾é€‰ <code>é¢å¤–å‘½ä»¤è¡Œå‚æ•°</code> ååœ¨è¾“å…¥æ¡†ç²˜è´´æ­¤å­—ç¬¦ï¼š <code>-epiclocale=zh-Hant</code><br>
<img src="https://www.xihrni.com/post-images/1591057832534.png" alt="Epic Games å¹³å°è®¾ç½®ç•Œé¢" loading="lazy"></p>
<p>è¿”å›åˆ°æ¸¸æˆåº“å¯åŠ¨å³å¯</p>
<p>å¯åŠ¨ç•Œé¢è¿˜æ˜¯è‹±æ–‡ä¸ç”¨ç†ä»–ï¼Œç‚¹ <code>PLAY</code> è¿›å…¥æ¸¸æˆåå°±æ˜¯ç¹ä½“ä¸­æ–‡äº†<br>
<img src="https://www.xihrni.com/post-images/1591058065557.png" alt="æ¸¸æˆå¯åŠ¨ç•Œé¢" loading="lazy"><br>
<img src="https://www.xihrni.com/post-images/1591058184453.png" alt="æ¸¸æˆèœå•ç•Œé¢" loading="lazy"><br>
ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…³äº PHP è¿æ¥æœ¬åœ° localhost ä¸Šçš„ Redis ç‰¹åˆ«æ…¢çš„å¤„ç†è®°å½•]]></title>
        <id>https://www.xihrni.com/post/guan-yu-php-lian-jie-localhost-shang-de-redis-te-bie-man-de-chu-li-ji-lu/</id>
        <link href="https://www.xihrni.com/post/guan-yu-php-lian-jie-localhost-shang-de-redis-te-bie-man-de-chu-li-ji-lu/">
        </link>
        <updated>2020-05-28T05:43:58.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>ğŸ˜³ æœ¬åœ°çš„ Yii2 é¡¹ç›®é…ç½® Redis ç¼“å­˜åæ¥å£é€Ÿåº¦éå¸¸æ…¢ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹åå‘ç°æ¯æ¬¡éƒ½æ˜¯åœ¨è¿æ¥ Redis çš„æ—¶å€™è€—æ—¶æœ€é•¿ï¼Œä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯ Yii2 æ¡†æ¶çš„æ‰©å±•é—®é¢˜ï¼Œåæ¥ç”¨ php-cli æ‰§è¡Œå•ä¸ªæ–‡ä»¶ä¹Ÿä¼šå‡ºç°å¤ªæ…¢çš„æƒ…å†µã€‚</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>ğŸ˜³ æœ¬åœ°çš„ Yii2 é¡¹ç›®é…ç½® Redis ç¼“å­˜åæ¥å£é€Ÿåº¦éå¸¸æ…¢ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹åå‘ç°æ¯æ¬¡éƒ½æ˜¯åœ¨è¿æ¥ Redis çš„æ—¶å€™è€—æ—¶æœ€é•¿ï¼Œä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯ Yii2 æ¡†æ¶çš„æ‰©å±•é—®é¢˜ï¼Œåæ¥ç”¨ php-cli æ‰§è¡Œå•ä¸ªæ–‡ä»¶ä¹Ÿä¼šå‡ºç°å¤ªæ…¢çš„æƒ…å†µã€‚</p>
</blockquote>
<!-- more -->
<h3 id="è¿æ¥-redis">è¿æ¥ Redis</h3>
<p>PHP è¿æ¥ Redis ä»£ç ï¼š</p>
<pre><code class="language-php">&lt;?php // redis.php
echo time() . &quot;\r\n&quot;;
$redis = new Redis();
$redis-&gt;connect('localhost', 6379);
echo 'Server is running: ' . $redis-&gt;ping() . &quot;\r\n&quot;;
echo time() . &quot;\r\n&quot;;
</code></pre>
<p>ä½¿ç”¨ php-cli æ‰§è¡Œï¼Œå‘ç°æ—¶é—´ç›¸å·®2ç§’ï¼š</p>
<pre><code class="language-shell">PS &gt; php -f redis.php
1590629905
Server is running: +PONG
1590629907
</code></pre>
<p>ä½†æ˜¯å°†è¿æ¥åœ°å€æ¢æˆ <code>127.0.0.1</code> ä¹‹åå´æ­£å¸¸ï¼š</p>
<pre><code class="language-shell">PS &gt; php -f redis.php
1590629918
Server is running: +PONG
1590629918
</code></pre>
<h3 id="é—®é¢˜åŸå› ">é—®é¢˜åŸå› </h3>
<p>ä¸Šç½‘æŸ¥äº†äº›èµ„æ–™åå‘ç° Windows ä» Win7 ä»¥åä¼˜å…ˆä½¿ç”¨ IPv6 çš„åè®®ï¼Œä½¿ <code>localhost</code> èµ°äº† IPv6 åè®®ï¼š</p>
<pre><code class="language-shell">PS &gt; hostname
G-AA00604

PS &gt; ping G-AA00604

æ­£åœ¨ Ping G-AA00604 [fe80::5cd6:59d3:ad04:b26f%14] å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:
æ¥è‡ª fe80::5cd6:59d3:ad04:b26f%14 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª fe80::5cd6:59d3:ad04:b26f%14 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª fe80::5cd6:59d3:ad04:b26f%14 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª fe80::5cd6:59d3:ad04:b26f%14 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128

fe80::5cd6:59d3:ad04:b26f%14 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 4ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):
    æœ€çŸ­ = 0msï¼Œæœ€é•¿ = 0msï¼Œå¹³å‡ = 0ms
</code></pre>
<p>ä»ä¸Šé¢çš„ <code>ping</code> å‘½ä»¤è¯·æ±‚è‡ªå·±æœ¬æœºçš„ä¸»æœºåç§°ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„æ˜¯ IPv6 çš„åœ°å€ç±»å‹ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ç½‘ç»œæ¥å£çš„ä¼˜å…ˆçº§ï¼š</p>
<pre><code class="language-shell">PS &gt; netsh interface ipv6 show prefixpolicies
æŸ¥è¯¢æ´»åŠ¨çŠ¶æ€...

ä¼˜å…ˆé¡ºåº    æ ‡ç­¾   å‰ç¼€
----------  -----  --------------------------------
        50      0  ::1/128
        40      1  ::/0
        35      4  ::ffff:0:0/96
        30      2  2002::/16
        5       5  2001::/32
        3       13  fc00::/7
        1       11  fec0::/10
        1       12  3ffe::/16
        1       3  ::/96

</code></pre>
<p>å¯ä»¥çœ‹åˆ°  IPv6 çš„åœ°å€ç±»å‹åœ¨æœ€ä¸Šé¢ï¼Œè€Œ IPv4 çš„åœ°å€ç±»å‹åœ¨æœ€ä¸‹é¢</p>
<h3 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h3>
<p>æ—¢ç„¶ IPv4 çš„ä¼˜å…ˆçº§è¾ƒä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ”¹å˜ä¸€ä¸‹ä¼˜å…ˆçº§ï¼ˆä½¿ç”¨ç®¡ç†å‘˜æƒé™ï¼‰</p>
<pre><code class="language-shell">PS &gt; netsh int ipv6 set prefix ::/96 50 0
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix ::ffff:0:0/96 40 1
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix 2002::/16 35 2
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix 2001::/32 30 3
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix ::1/128 10 4
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix ::/0 5 5
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix fc00::/7 3 13
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix fec0::/10 1 11
ç¡®å®šã€‚

PS &gt; netsh int ipv6 set prefix 3ffe::/16 1 12
ç¡®å®šã€‚

</code></pre>
<p>æ”¹å®Œä¹‹åæˆ‘ä»¬å†çœ‹ä¸€ä¸‹ç½‘ç»œæ¥å£çš„ä¼˜å…ˆçº§ï¼š</p>
<pre><code class="language-shell">PS &gt; netsh interface ipv6 show prefixpolicies
æŸ¥è¯¢æ´»åŠ¨çŠ¶æ€...

ä¼˜å…ˆé¡ºåº    æ ‡ç­¾   å‰ç¼€
----------  -----  --------------------------------
        50      0  ::/96
        40      1  ::ffff:0:0/96
        35      2  2002::/16
        30      3  2001::/32
        10      4  ::1/128
         5      5  ::/0
         3     13  fc00::/7
         1     12  3ffe::/16
         1     11  fec0::/10

</code></pre>
<p>çœ‹åˆ° IPv4 çš„ä¼˜å…ˆçº§å·²ç»åœ¨æœ€ä¸Šæ–¹äº†ï¼Œé‚£æˆ‘ä»¬å† <code>ping</code> ä¸€ä¸‹ï¼š</p>
<pre><code class="language-shell">PS &gt; ping G-AA00604

æ­£åœ¨ Ping G-AA00604 [192.168.56.1] å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:
æ¥è‡ª 192.168.56.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª 192.168.56.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª 192.168.56.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128
æ¥è‡ª 192.168.56.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128

192.168.56.1 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 4ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):
    æœ€çŸ­ = 0msï¼Œæœ€é•¿ = 0msï¼Œå¹³å‡ = 0ms
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å·²ç»åå›äº† IPv4 çš„åœ°å€ç±»å‹ï¼Œå†è¯•è¯•è¿æ¥ <code>localhost</code> çš„ Redisï¼š</p>
<pre><code class="language-shell">PS &gt; php -f redis.php
1590630198
Server is running: +PONG
1590630198
</code></pre>
<p>åˆ°æ­¤ï¼Œå·²ç»è§£å†³äº†è¿æ¥ <code>localhost</code> æ…¢çš„é—®é¢˜ï¼Œå…¶ä»–åº”ç”¨ä¹Ÿå¯ä½¿ç”¨æ­¤æ–¹å¼è§£å†³ï¼Œæ¯”å¦‚ï¼šMySQLã€MemCacahe ç­‰<br>
ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MacOS å·²è¿è¡Œçš„ Docker å®¹å™¨æ·»åŠ /ä¿®æ”¹ç«¯å£æ˜ å°„]]></title>
        <id>https://www.xihrni.com/post/macos-yi-yun-xing-de-docker-rong-qi-tian-jia-xiu-gai-duan-kou-ying-she/</id>
        <link href="https://www.xihrni.com/post/macos-yi-yun-xing-de-docker-rong-qi-tian-jia-xiu-gai-duan-kou-ying-she/">
        </link>
        <updated>2020-01-01T06:24:35.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>ğŸ˜³å½“å‰å®¹å™¨åç§°ä¸º <code>btPanel</code>ï¼Œéœ€è¦æ·»åŠ  <code>3306</code> ç«¯å£</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>ğŸ˜³å½“å‰å®¹å™¨åç§°ä¸º <code>btPanel</code>ï¼Œéœ€è¦æ·»åŠ  <code>3306</code> ç«¯å£</p>
</blockquote>
<!-- more -->
<h3 id="ç¡®è®¤å·²æ˜ å°„ç«¯å£">ç¡®è®¤å·²æ˜ å°„ç«¯å£</h3>
<pre><code class="language-shell"># name or container id
&gt; docker port btPanel
</code></pre>
<h3 id="ç¡®è®¤å®¹å™¨id">ç¡®è®¤å®¹å™¨ID</h3>
<pre><code class="language-shell">&gt; docker container inspect btPanel
</code></pre>
<h3 id="åœæ­¢å®¹å™¨">åœæ­¢å®¹å™¨</h3>
<pre><code class="language-shell">&gt; docker stop btPanel
</code></pre>
<h3 id="ç™»å½•åˆ°å®¹å™¨">ç™»å½•åˆ°å®¹å™¨</h3>
<pre><code class="language-shell">&gt; screen ~/Library/Containers/com.docker.docker/Data/vms/0/tty
</code></pre>
<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p>å…ˆè¿›å…¥å®¹å™¨IDçš„ç›®å½•</p>
<pre><code class="language-shell">&gt; cd /var/lib/docker/containers/&lt;containerId&gt;
</code></pre>
<p>ä¿®æ”¹ <code>config.v2.json</code> æ–‡ä»¶</p>
<blockquote>
<p>è¢«å‹ç¼©çš„ json æ ¼å¼ï¼Œå¯å¤åˆ¶å‡ºæ¥ç”¨ç¼–è¾‘å™¨ä¿®æ”¹</p>
</blockquote>
<pre><code class="language-shell">&gt; vi config.v2.json
</code></pre>
<p>shell<br>
æŒ‰ç…§åŸæœ‰æ ¼å¼ä¿®æ”¹æˆ–æ–°å¢ <code>Config.ExposedPorts</code> å—</p>
<pre><code class="language-json">{
    &quot;80/tcp&quot;: {},
    &quot;888/tcp&quot;: {},
    &quot;3306/tcp&quot;: {}
}
</code></pre>
<p>ä¿®æ”¹å®Œåä¿å­˜é€€å‡º</p>
<pre><code class="language-shell">:wq
</code></pre>
<p>ä¿®æ”¹ <code>hostconfig.json</code> æ–‡ä»¶</p>
<blockquote>
<p>è¢«å‹ç¼©çš„ json æ ¼å¼ï¼Œå¯å¤åˆ¶å‡ºæ¥ç”¨ç¼–è¾‘å™¨ä¿®æ”¹</p>
</blockquote>
<pre><code class="language-shell">&gt; vi config.v2.json
</code></pre>
<p>æŒ‰ç…§åŸæœ‰æ ¼å¼ä¿®æ”¹æˆ–æ–°å¢ <code>PortBindings</code> å—</p>
<pre><code class="language-json">{
    &quot;80/tcp&quot;: [
        {
            &quot;HostIp&quot;: &quot;&quot;,
            &quot;HostPort&quot;: &quot;80&quot;
        }
    ],
    &quot;888/tcp&quot;: [
        {
            &quot;HostIp&quot;: &quot;&quot;,
            &quot;HostPort&quot;: &quot;888&quot;
        }
    ],
    &quot;3306/tcp&quot;: [
        {
            &quot;HostIp&quot;: &quot;&quot;,
            &quot;HostPort&quot;: &quot;3306&quot;
        }
    ]
}
</code></pre>
<p>ä¿®æ”¹å®Œåä¿å­˜é€€å‡º</p>
<pre><code class="language-shell">:wq
</code></pre>
<blockquote>
<p>vi å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œ<code>dd</code> æ˜¯åˆ é™¤å½“å‰è¡Œï¼Œ<code>dG</code> æ˜¯åˆ é™¤å½“å‰è¡Œåé¢çš„å†…å®¹</p>
</blockquote>
<h3 id="é€€å‡ºå®¹å™¨">é€€å‡ºå®¹å™¨</h3>
<p>æŒ‰ä¸‹ <code>Ctrl</code> + <code>A</code>ï¼Œå†å¿«é€ŸæŒ‰ <code>D</code>ï¼Œé€€å‡º <code>screen</code></p>
<h3 id="ä¼šè¯">ä¼šè¯</h3>
<p>æŸ¥çœ‹å½“å‰ä¼šè¯</p>
<pre><code class="language-shell">&gt; screen -ls
</code></pre>
<p>æ€æ­»ä¼šè¯å¹¶é€€å‡º</p>
<pre><code class="language-shell">&gt; kill -9 12345
&gt; screen -wipe
</code></pre>
<h3 id="é‡å¯-docker-desktop">é‡å¯ Docker Desktop</h3>
<p>æ‰‹åŠ¨åœ¨çŠ¶æ€æ ä¸Šç‚¹å‡» <code>Restart</code> è¿›è¡Œé‡å¯<br>
<img src="https://www.xihrni.com/post-images/1591079475440.png" alt="" loading="lazy"></p>
<p>æœ€åé‡å¯å®¹å™¨</p>
<pre><code class="language-shell">&gt; docker start btPanel
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CentOS ä½¿ç”¨ç§˜é’¥å…å¯† SSH è¿œç¨‹ç™»å½•]]></title>
        <id>https://www.xihrni.com/post/centos-shi-yong-mi-yao-mian-mi-ssh-yuan-cheng-deng-lu/</id>
        <link href="https://www.xihrni.com/post/centos-shi-yong-mi-yao-mian-mi-ssh-yuan-cheng-deng-lu/">
        </link>
        <updated>2019-11-26T06:45:02.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="ç”Ÿæˆ-ssh-key">ğŸ˜³ç”Ÿæˆ SSH Key</h3>
<blockquote>
<p><code>~</code> ä»£è¡¨å½“å‰ç”¨æˆ·ç›®å½•ï¼Œæ¯”å¦‚ root ç”¨æˆ·åˆ™ä¸º <code>/root</code></p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<h3 id="ç”Ÿæˆ-ssh-key">ğŸ˜³ç”Ÿæˆ SSH Key</h3>
<blockquote>
<p><code>~</code> ä»£è¡¨å½“å‰ç”¨æˆ·ç›®å½•ï¼Œæ¯”å¦‚ root ç”¨æˆ·åˆ™ä¸º <code>/root</code></p>
</blockquote>
<!-- more -->
<p>æ£€æŸ¥å½“å‰æ˜¯å¦å·²å­˜åœ¨ <code>ssh key</code></p>
<pre><code class="language-shell">&gt; cat ~/.ssh/id_rsa
</code></pre>
<p>ç”Ÿæˆ <code>ssh key</code> ï¼ˆå·²å­˜åœ¨åˆ™æ— éœ€ç”Ÿæˆï¼‰</p>
<pre><code class="language-shell">&gt; ssh-keygen -t rsa -C &quot;xieyucheng@dyg.cn&quot;
</code></pre>
<p><code>id_rsa</code> ä¸ºç§˜é’¥æ–‡ä»¶ï¼Œ<code>id_rsa.pub</code> ä¸ºå…¬é’¥æ–‡ä»¶</p>
<p>æŸ¥çœ‹å…¬é’¥æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; cat ~/.ssh/id_rsa.pub
</code></pre>
<blockquote>
<p>æ³¨ï¼šæœ¬åœ°ä¸è¿œç¨‹éƒ½éœ€ç”ŸæˆSSh Key</p>
</blockquote>
<h3 id="æœ¬åœ°å…¬é’¥åŠ å…¥åˆ°è¿œç¨‹æœåŠ¡å™¨æˆæƒæ–‡ä»¶ä¸­">æœ¬åœ°å…¬é’¥åŠ å…¥åˆ°è¿œç¨‹æœåŠ¡å™¨æˆæƒæ–‡ä»¶ä¸­</h3>
<p><strong>è¿œç¨‹æœåŠ¡å™¨</strong>æ£€æŸ¥å½“å‰æ˜¯å¦å·²å­˜åœ¨ <code>authorized_keys</code> æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; cat ~/.ssh/authorized_keys
</code></pre>
<p>åˆ›å»º <code>authorized_keys</code> æ–‡ä»¶å¹¶ä¿®æ”¹æƒé™ï¼ˆå·²å­˜åœ¨åˆ™æ— éœ€åˆ›å»ºï¼‰</p>
<pre><code class="language-shell">&gt; touch ~/.ssh/authorized_keys
&gt; chmod 600 ~/.ssh/authorized_keys
</code></pre>
<p>æ‹·è´<strong>æœ¬åœ°</strong> <code>id_rsa.pub</code> å…¬é’¥æ–‡ä»¶ä¸­æ‰€æœ‰å†…å®¹åˆ°<strong>è¿œç¨‹æœåŠ¡å™¨</strong></p>
<pre><code class="language-shell">&gt; vi ~/.ssh/G-AA00468.pub # åˆ›å»ºä¸€ä¸ªä»¥æœ¬åœ°ä¸»æœºåç§°å‘½åçš„ä¸´æ—¶æ–‡ä»¶
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼Œç²˜è´´ï¼Œè¾“å…¥ <code>:wq</code> ä¿å­˜æ–‡ä»¶å¹¶é€€å‡º</p>
<pre><code class="language-shell">&gt; cat ~/.ssh/G-AA00468.pub &gt;&gt; ~/.ssh/authorized_keys # è¿½åŠ åˆ° `authorized_keys` æ–‡ä»¶
</code></pre>
<h3 id="é…ç½®è¿œç¨‹æœåŠ¡å™¨sshæœåŠ¡">é…ç½®è¿œç¨‹æœåŠ¡å™¨SSHæœåŠ¡</h3>
<p>ç¼–è¾‘ <code>ssh</code> é…ç½®</p>
<pre><code class="language-shell">&gt; vi /etc/ssh/sshd_config
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼Œå°†ä¸‹é¢ä¸¤ä¸ªé…ç½®ä¿®æ”¹ï¼Œè¾“å…¥ <code>:wq</code> ä¿å­˜æ–‡ä»¶å¹¶é€€å‡º</p>
<pre><code class="language-shell">PasswordAuthentication no // ç¦æ­¢ä½¿ç”¨åŸºäºå£ä»¤è®¤è¯çš„æ–¹å¼ç™»é™†
PubkeyAuthentication yes // å…è®¸ä½¿ç”¨åŸºäºå¯†é’¥è®¤è¯çš„æ–¹å¼ç™»é™†
</code></pre>
<p>é‡å¯ <code>ssh</code> æœåŠ¡</p>
<pre><code class="language-shell">&gt; /etc/init.d/sshd reload # CentOS7ç³»ç»Ÿä»¥ä¸‹
</code></pre>
<p><strong>æˆ–</strong></p>
<pre><code class="language-shell">&gt; systemctl restart sshd.service # CentOS7ç³»ç»Ÿä»¥ä¸Š
</code></pre>
<h3 id="ä½¿ç”¨ç§˜é’¥å…å¯†ç™»å½•">ä½¿ç”¨ç§˜é’¥å…å¯†ç™»å½•</h3>
<pre><code class="language-shell">&gt; ssh -i ~/.ssh/id_rsa root@***.***.***.***
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos é‡å†™ crontab -r å‘½ä»¤é˜²æ­¢è¯¯æ“ä½œ]]></title>
        <id>https://www.xihrni.com/post/centos-chong-xie-crontab-r-ming-ling-fang-zhi-wu-cao-zuo/</id>
        <link href="https://www.xihrni.com/post/centos-chong-xie-crontab-r-ming-ling-fang-zhi-wu-cao-zuo/">
        </link>
        <updated>2019-07-24T07:01:58.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>ğŸ˜³ä¸€æ¬¡è¯¯æ“ä½œå°†æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰å®šæ—¶ä»»åŠ¡æ¸…é™¤å¯¼è‡´é¡¹ç›®æ•…éšœ</p>
</blockquote>
<h3 id="åˆ«å">åˆ«å</h3>
<p>è®¾ç½®åˆ«åé‡å†™ <code>crontab</code> å‘½ä»¤</p>
<pre><code class="language-shell">&gt; vi /etc/bashrc
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ–°å¢ä¸€è¡Œ</p>
<pre><code class="language-shell">alias crontab='/usr/bin/crontab.sh'
</code></pre>
<p>è¾“å…¥ <code>:wq</code> ä¿å­˜å¹¶é€€å‡º</p>
<h3 id="å‘½ä»¤æ–‡ä»¶">å‘½ä»¤æ–‡ä»¶</h3>
<p>ç¼–è¾‘æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; vi crontab.sh
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç </p>
<pre><code class="language-shell">#!/bin/sh
source /etc/profile;
source ~/.bash_profile;

etime=`date -d &quot;0 days ago&quot; +%Y%m%d_%H%M%S`

if [ &quot;$1&quot; = &quot;-r&quot; ] ; then
    echo &quot;My God! Dangerous...&quot;
    echo &quot;Exit...&quot;
    exit 2
fi

if [ &quot;$1&quot; = &quot;-l&quot; ] ; then
    /usr/bin/crontab -l
    exit 0
fi

# ç¼–è¾‘æ—¶è¿›è¡Œå¤‡ä»½
if [ &quot;$1&quot; = &quot;-e&quot; ] ; then
    mkdir -p  ~/cronbak
    /usr/bin/crontab -l  &gt;  ~/cronbak/cron.bak.$etime.a
    /usr/bin/crontab -e
    /usr/bin/crontab -l  &gt;  ~/cronbak/cron.bak.$etime.b
f
</code></pre>
<p>ç§»åŠ¨æ–‡ä»¶å¹¶æ·»åŠ æƒé™</p>
<pre><code class="language-shell">&gt; mv crontab.sh /usr/bin
&gt; chmod 755 /usr/bin/crontab.sh
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos å®‰è£… Composer å¹¶é…ç½®ç¯å¢ƒ]]></title>
        <id>https://www.xihrni.com/post/centos-an-zhuang-composer-bing-pei-zhi-huan-jing/</id>
        <link href="https://www.xihrni.com/post/centos-an-zhuang-composer-bing-pei-zhi-huan-jing/">
        </link>
        <updated>2019-07-23T07:07:27.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="php-cli">ğŸ˜³PHP CLI</h3>
<p>é¦–å…ˆæ£€æµ‹ PHP CLI ç‰ˆæœ¬ï¼Œè¾“å…¥å‘½ä»¤</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="php-cli">ğŸ˜³PHP CLI</h3>
<p>é¦–å…ˆæ£€æµ‹ PHP CLI ç‰ˆæœ¬ï¼Œè¾“å…¥å‘½ä»¤</p>
<!-- more -->
<pre><code class="language-shell">&gt; php -v
PHP 5.2.3 (cli) ...
</code></pre>
<p>éœ€è¦æ›´æ¢ PHP CLI ç‰ˆæœ¬ï¼Œä½¿ç”¨ BT é¢æ¿ä¸­ <code>7.2</code> çš„ç‰ˆæœ¬ï¼Œè®¾ç½®ä¸€ä¸ªåˆ«å</p>
<pre><code class="language-shell">&gt; vi ~/.bashrc
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ–°å¢ä¸€è¡Œ</p>
<pre><code class="language-shell">alias php='/www/server/php/72/bin/php'
</code></pre>
<p>è¾“å…¥ <code>:wq</code> ä¿å­˜å¹¶é€€å‡º</p>
<p>å†æ¬¡æ‰§è¡Œ <code>php -v</code> æŸ¥çœ‹ç‰ˆæœ¬ï¼Œè¾“å‡º</p>
<pre><code class="language-shell">PHP 7.2.4 (cli) (built: Nov 12 2018 10:47:44) ( NTS )
Copyright (c) 1997-2018 The PHP Group
Zend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies
</code></pre>
<p>çœ‹åˆ°å·²ç»æ˜¯ <code>7.2.4</code> çš„ç‰ˆæœ¬</p>
<h3 id="composer">Composer</h3>
<p>ä½¿ç”¨ PHP ä¸‹è½½å®‰è£…æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; php -r &quot;copy('https://getcomposer.org/installer', 'composer-setup.php');&quot;
</code></pre>
<p>éªŒè¯æ–‡ä»¶æ˜¯å¦æ­£ç¡®</p>
<pre><code class="language-shell">&gt; php -r &quot;if (hash_file('sha384', 'composer-setup.php') === '48e3236262b34d30969dca3c37281b3b4bbe3221bda826ac6a9a62d6444cdb0dcd0615698a5cbe587c3f0fe57a54d8f5') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;&quot;
</code></pre>
<p>è¾“å‡º <code>Installer verified</code> åˆ™ä¸ºæ­£ç¡®ï¼Œæ‰§è¡Œå®‰è£…æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; php composer-setup.php
</code></pre>
<p>æ¥ç€åˆ é™¤å®‰è£…æ–‡ä»¶</p>
<pre><code class="language-shell">&gt; php -r &quot;unlink('composer-setup.php');&quot;
</code></pre>
<p>ç§»åŠ¨åˆ°å…¨å±€</p>
<pre><code class="language-shell">&gt; mv composer.phar /usr/local/bin/composer
</code></pre>
<p>ä¸­å›½é•œåƒ</p>
<pre><code class="language-shell">&gt; composer config -g repo.packagist composer https://packagist.phpcomposer.com
# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
&gt; composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/
</code></pre>
<h3 id="composer-å‘½ä»¤">Composer å‘½ä»¤</h3>
<p>å®‰è£…/æ›´æ–°é¡¹ç›®ä¾èµ–</p>
<pre><code class="language-shell">&gt; cd 'ä½ çš„é¡¹ç›®åœ°å€'
&gt; composer install
# æˆ–
&gt; composer update
</code></pre>
<p>å¦‚æœæŠ¥é”™</p>
<pre><code class="language-shell">&gt; Unsupported declare 'strict_types' ...
</code></pre>
<p>PHPç‰ˆæœ¬é”™è¯¯ï¼ŒåŸå› æ˜¯å› ä¸ºç›´æ¥ä½¿ç”¨ composer å‘½ä»¤åº”è¯¥è°ƒç”¨åˆ°äº†è€ç‰ˆæœ¬çš„ PHP CLIï¼Œæ·»åŠ ä¸€ä¸ªåˆ«åå³å¯</p>
<pre><code class="language-shell">&gt; vi ~/.bashrc
</code></pre>
<p>è¾“å…¥ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ–°å¢ä¸€è¡Œ</p>
<pre><code class="language-shell">&gt; alias composer='php /usr/local/bin/composer'
</code></pre>
<p>è¾“å…¥ <code>:wq</code> ä¿å­˜å¹¶é€€å‡º</p>
<blockquote>
<p>é‡æ–°ç™»å½• SSH å³å¯ç”Ÿæ•ˆ <code>.bashrc</code> æ–‡ä»¶<br>
ğŸ˜¬</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Yii2 å°† CSV æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“]]></title>
        <id>https://www.xihrni.com/post/yii2-jiang-csv-wen-jian-dao-ru-dao-shu-ju-ku/</id>
        <link href="https://www.xihrni.com/post/yii2-jiang-csv-wen-jian-dao-ru-dao-shu-ju-ku/">
        </link>
        <updated>2019-06-20T07:14:51.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="ä»£ç ">ğŸ˜³ä»£ç </h3>
]]></summary>
        <content type="html"><![CDATA[<h3 id="ä»£ç ">ğŸ˜³ä»£ç </h3>
<!-- more -->
<pre><code class="language-php">$file = fopen(Yii::getAlias('@webroot') . '/region-code.csv', 'r');

while ($data = fgetcsv($file)) {
    $rows[] = [
        'name' =&gt; trim($data[1]),
        'code' =&gt; trim($data[0]),
    ];
}

fclose($file);

$result = Yii::$app-&gt;db-&gt;createCommand()
    -&gt;batchInsert(\app\models\RegionCode::tableName(), ['name', 'code'], $rows)
    -&gt;execute();

var_dump($result);exit;
</code></pre>
<p>ğŸ˜¬</p>
]]></content>
    </entry>
</feed>